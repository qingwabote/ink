# 重新定义向量
问题：把一个向量从一个空间变换到另一个空间后，这个向量还是从前的那个向量吗？

把你从家挪到公司去，你还是你（*事实上，你不能确定，我们对事物使用何种定义，取决于我们当下要解决的问题，存在先于本质*）。

其实把你和你所处的位置分开定义，就解释了“你还是你”的问题。那么，如果将向量和它所处的空间也分开定义呢？

“任何向量都是**基向量**的线性组合”，现在以基向量 $ij$ [张成的](https://charlesliuyx.github.io/2017/10/06/【直观详解】线性代数的本质/)二维空间举例，我们把向量 $v$ 定义为 $v_x i + v_y j$ ，在这种定义下我们通常所说的 $v = \begin{bmatrix} v_x \\ v_y\end{bmatrix}$ 正处于以基向量 $i = \begin{bmatrix} 1 \\ 0\end{bmatrix}$，$j = \begin{bmatrix} 0 \\ 1\end{bmatrix}$ 张成的空间，即 $v = v_x \begin{bmatrix} 1 \\ 0\end{bmatrix} + v_y \begin{bmatrix} 0 \\ 1\end{bmatrix} = \begin{bmatrix} v_x \\ v_y\end{bmatrix}$

推广到一般情况，向量 $v$ 在 $i = \begin{bmatrix} i_x \\ i_y\end{bmatrix}$，$j = \begin{bmatrix} j_x \\ j_y\end{bmatrix}$ 张成的空间下的映射 $v^{\prime}$ 为 

$v^{\prime} = v_x \begin{bmatrix} i_x \\ i_y\end{bmatrix} + v_y \begin{bmatrix} j_x \\ j_y\end{bmatrix} = \begin{bmatrix} v_x i_x + v_y j_x \\ v_x i_y + v_y j_y\end{bmatrix}$

好，我们换一种写法

$v^{\prime} = v \begin{bmatrix} i_x \\ i_y\end{bmatrix} \begin{bmatrix} j_x \\ j_y\end{bmatrix} = v \begin{bmatrix} i_x & j_x\\i_y & j_y\end{bmatrix} = \begin{bmatrix} v_x i_x + v_y j_x \\ v_x i_y + v_y j_y\end{bmatrix}$ 这就是**向量乘矩阵**。

# 再看矩阵乘矩阵
“任何向量都是**基向量**的线性组合”，基向量也是向量, 把基向量 $ij$ 转换到基向量 $mn$ 张成的空间下

$i' = i_x m + i_y n$

$j' = j_x m + j_y n$

写成矩阵形式

$\begin{bmatrix} i'  \quad  j' \end{bmatrix} = \begin{bmatrix} i_x m + i_y n  \quad  j_x m + j_y n \end{bmatrix} = \begin{bmatrix} i_x m_x + i_y n_x & j_x m_x+ j_y n_x \\ i_x m_y + i_y n_y & j_x m_y + j_y n_y\end{bmatrix} = \begin{bmatrix} i_x & j_x\\i_y & j_y\end{bmatrix} \begin{bmatrix} m_x & n_x\\m_y & n_y\end{bmatrix} $

# 向量乘向量
<!-- 向量 $v$ 在 $i = \begin{bmatrix} a \\ 0\end{bmatrix}$，$j = \begin{bmatrix} b \\ 0\end{bmatrix}$ 张成的空间下的映射 $v^{\prime}$ 为 

$v^{\prime} = v_x \begin{bmatrix} a \\ 0\end{bmatrix} + v_y \begin{bmatrix} b \\ 0\end{bmatrix} = \begin{bmatrix} v_x a + v_y b \\ v_x 0 + v_y 0\end{bmatrix} = \begin{bmatrix} v_x a + v_y b \\ 0\end{bmatrix}$ -->

# 那么矩阵加矩阵？
https://github.com/KhronosGroup/glTF-Tutorials/blob/master/gltfTutorial/gltfTutorial_020_Skins.md


<!-- 现在，我们再使用 $i^{\prime},j^{\prime}$ 变换 $v^{\prime}$ 得到 $v^{\prime\prime}$ 

$v^{\prime \prime} = v^{\prime}_x i^{\prime} + v^{\prime}_y j^{\prime} = (v_x i_x + v_y j_x)i^{\prime} + (v_x i_y + v_y j_y)j^{\prime}$

将计算结果稍加整理

$= (v_x i_x i^{\prime} + v_y j_x i^{\prime}) + (v_x i_y j^{\prime} + v_y j_y j^{\prime}) = (v_x i_x i^{\prime} + v_x i_y j^{\prime}) + (v_y j_x i^{\prime} + v_y j_y j^{\prime}) = v_x(i_x i^{\prime} + i_y j^{\prime}) + v_y(j_x i^{\prime} + j_y j^{\prime}) = v_x i^{\prime \prime} + v_y j^{\prime \prime}$

即 

$v^{\prime \prime} = v_x i^{\prime \prime} + v_y j^{\prime \prime}$

这里

$i^{\prime \prime} = i_x i^{\prime} + i_y j^{\prime} $

$j^{\prime \prime} = j_x i^{\prime} + j_y j^{\prime} $

如果将基向量旋转 90°

$i = \begin{bmatrix} 0 \\ 1\end{bmatrix}$， $j = \begin{bmatrix} -1 \\ 0\end{bmatrix}$，那么 $v = v_x \begin{bmatrix} 0 \\ 1\end{bmatrix} + v_y \begin{bmatrix} -1 \\ 0\end{bmatrix} = \begin{bmatrix} -v_y \\ v_x\end{bmatrix}$

再看另一对基向量（错切）

$i^{\prime} = \begin{bmatrix} 1 \\ 0\end{bmatrix}$，$j^{\prime} = \begin{bmatrix} 1 \\ 1\end{bmatrix}$

我们可以先对 $v$ 应用旋转，计算出结果，再应用错切，或者可以将两对基向量变换合并

我们从两个坐标轴上各取一个单位向量作为基向量 $i = [1,0]$ 与 $j = [0,1]$ 并用它们组成矩阵的两列(或两行) $\begin{bmatrix} 1 & 0\\0 & 1\end{bmatrix}$，于是我们就有了一个**单位矩阵**，这是变换的起点，即什么也不变，任何向量乘以单位矩阵都等于本身，$\begin{bmatrix} 1 & 0\\0 & 1\end{bmatrix} \begin{bmatrix} x\\ y \end{bmatrix} = x \begin{bmatrix} 1 \\ 0 \end{bmatrix} + y \begin{bmatrix} 0 \\ 1\end{bmatrix} = \begin{bmatrix} x\\ y \end{bmatrix}$

接着我们将基向量旋转 90°，$i = [0,1]$ 和 $j = [-1,0]$，同样的，我们就又有了一个将所有向量旋转 90° 的矩阵，$\begin{bmatrix} 0 & -1\\1 & 0\end{bmatrix} \begin{bmatrix} x\\ y \end{bmatrix} = x \begin{bmatrix} 0 \\ 1 \end{bmatrix} + y \begin{bmatrix} -1 \\ 0\end{bmatrix} = \begin{bmatrix} -y\\ x \end{bmatrix}$

我们再加上个错切(Shearing) $\begin{bmatrix} 1 & 1\\0 & 1\end{bmatrix}$，并和上面的旋转合并，即对旋转后的两个基向量分别应用错切 $\begin{bmatrix} 1 & 1\\0 & 1\end{bmatrix} \begin{bmatrix} 0 & -1\\1 & 0\end{bmatrix} = \begin{bmatrix} 0\begin{bmatrix} 1 \\ 0\end{bmatrix} + 1\begin{bmatrix} 1 \\ 1\end{bmatrix} & -1\begin{bmatrix} 1 \\ 0\end{bmatrix} + 0\begin{bmatrix} 1 \\ 1\end{bmatrix}\end{bmatrix} = \begin{bmatrix} 1 & -1\\1 & 0\end{bmatrix}$ -->